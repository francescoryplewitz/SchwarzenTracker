{
  "name": "base",
  "version": "0.1.0",
  "private": true,
  "license": "Brale Energy GmbH",
  "scripts": {
    "docker:build": "docker build . --build-arg NODE_ENV=production -t $version",
    "docker:create": "npm run docker:build && npm run docker:tag && npm run docker:push",
    "docker:tag": "docker tag $version 669860431552.dkr.ecr.eu-central-1.amazonaws.com/base:$version",
    "docker:push": "npm run ecr:login && docker push 669860431552.dkr.ecr.eu-central-1.amazonaws.com/base:$version",
    "ecr:login": "aws ecr get-login-password --region eu-central-1 | docker login --username AWS --password-stdin 669860431552.dkr.ecr.eu-central-1.amazonaws.com",
    "start:container": "npm run set:private-secrets && npm run start",
    "set:private-secrets": "node ./scripts/set-private-secrets.js",
    "commit": "npm run lint && git-cz",
    "lint": "npx standard --fix",
    "release": "standard-version",
    "audit": "npm audit --omit=dev",
    "start": "node ./srv/server.js",
    "install:all": "npm ci && cd ./frontend && npm ci",
    "license:check": "license-checker --production --onlyAllow 'MIT;ISC;BlueOak-1.0.0;BSD-3-Clause;Apache-2.0;Unlicense;UNLICENSED;http://github.com/substack/node-bufferlist;BSD-2-Clause;0BSD;https://brale.de' ",
    "start:coverage": "c8 --on SIGTERM  --on SIGINT  --reporter=text node ./srv/server.js",
    "start:ui-tests": "export NODE_ENV=ui-tests && npm run set:schema && npm run db:start-local && npm run start",
    "report:coverage": "c8 report --reporter=text",
    "start:local": "export NODE_ENV=development && npm run set:schema && npm run db:start-local && npm run start",
    "db:start-local": "cd .local-development && docker compose up  --no-recreate -d ",
    "db:init": "npm run set:schema && npx prisma generate",
    "db:stop": "cd .local-development && docker compose stop",
    "db:migrate": "npm run set:schema && npm run db:start-local && npx prisma migrate dev",
    "db:reset": "npm run set:schema && npx prisma migrate reset",
    "db:deploy": "npm run set:schema && npx prisma migrate deploy",
    "db:seed": "npm run set:schema && node ./scripts/seed-database.js",
    "db:view": "npm run set:schema && npx prisma studio",
    "set:schema": "node ./scripts/set-schema.js",
    "start:frontend": "cd ./frontend && npx quasar dev",
    "app:build": "cd ./frontend && npx quasar build",
    "test:unit": "npx mocha test/unit/**/*.js --checkLeaks=false",
    "test:integration": "npx mocha test/integration/**/*.js --file test/setup.js --checkLeaks=false",
    "test:run": "npm run test:unit && npm run test:integration",
    "test:all": "npm run test:unit && start-server-and-test start http://localhost:5010 test:integration",
    "test:frontend": "cd ./frontend && npm run test:unit",
    "test:provider:run": "npx mocha 'test/provider/*.js' --file test/setup.js --checkLeaks=false",
    "test:provider": "export NODE_ENV=test && npm run set:schema && npm run db:start-local && npm run db:migrate && start-server-and-test start http://localhost:5010 test:provider:run && npm run db:stop ",
    "test": "export NODE_ENV=test && npm run set:schema && npm run db:start-local && npm run db:migrate && start-server-and-test start http://localhost:5010 test:integration && npm run db:stop ",
    "test:local": "export NODE_ENV=development && npm run set:schema && npm run db:start-local && npm run db:migrate && start-server-and-test start:ui-tests http://localhost:5001 test:ui && npm run db:stop ",
    "test:ci": "export NODE_ENV=test NODE_V8_COVERAGE=coverage/tmp && npm run set:schema && npm run db:start-local && npm run db:migrate && (rm -rf coverage .nyc_output 2>/dev/null || true) && npm run test:all && sleep 1 && FORCE_COLOR=1 c8 report --exclude-after-remap | sed 's|base-expressjs-vue/||g; s| base-expressjs-vue| .|g' && npm run db:stop",
    "claude": "claude --dangerously-skip-permissions"
  },
  "c8": {
    "all": true,
    "check-coverage": true,
    "lines": 80,
    "exclude": [
      "srv/server/authentication/oauth.js",
      "srv/server/production.js",
      "srv/modules/jobs.js",
      "srv/jobs/*",
      "srv/common/axios.js",
      "srv/modules/file-handler/*",
      "srv/server/Logger.js",
      "srv/server/logger.js",
      "mockserver/**",
      "test/**",
      "**/*.spec.js",
      "**/*.test.js",
      "**/node_modules/**",
      "coverage/**",
      ".mocharc.js",
      "scripts/**",
      "frontend/**"
    ],
    "reporter": [
      "text",
      "lcov",
      "cobertura"
    ],
    "excludeAfterRemap": true,
    "src": "./srv"
  },
  "standard": {
    "ignore": [
      "**/mockserver/**",
      "**/test/**/*.js",
      "**/frontend/**",
      "**/scripts/**"
    ],
    "globals": [
      "it",
      "expect",
      "describe",
      "env",
      "Logger",
      "syncOrchestrator"
    ]
  },
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  },
  "dependencies": {
    "@prisma/client": "^6.7.0",
    "archiver": "^7.0.1",
    "aws-sdk": "^2.1692.0",
    "axios": "^1.9.0",
    "c8": "^10.1.3",
    "canvas": "^3.1.0",
    "chai": "^5.2.0",
    "chai-http": "^5.1.2",
    "chai-subset": "^1.6.0",
    "cookie-parser": "~1.4.4",
    "cors": "^2.8.5",
    "csrf-csrf": "^4.0.3",
    "debug": "~2.6.9",
    "dotenv": "^16.5.0",
    "express": "^4.21.2",
    "express-rate-limit": "^8.2.1",
    "express-session": "^1.18.1",
    "express-useragent": "^1.0.15",
    "helmet": "^8.1.0",
    "luxon": "^3.6.1",
    "memorystore": "^1.6.7",
    "morgan": "~1.9.1",
    "passport": "^0.7.0",
    "passport-http": "^0.3.0",
    "passport-oauth2": "^1.8.0",
    "pdf-vue3": "^1.0.12",
    "querystring": "^0.2.1",
    "sharp": "^0.34.1",
    "toad-scheduler": "^3.1.0",
    "validator": "^13.15.0"
  },
  "devDependencies": {
    "@wdio/cli": "^9.13.0",
    "@wdio/local-runner": "^9.13.0",
    "@wdio/mocha-framework": "^9.13.0",
    "@wdio/spec-reporter": "^8.29.3",
    "axios-cookiejar-support": "^4.0.7",
    "chai": "^4.3.8",
    "chai-as-promised": "^7.1.1",
    "chai-http": "^4.4.0",
    "chai-subset": "^1.6.0",
    "cz-conventional-changelog": "^3.3.0",
    "git-cz": "^4.9.0",
    "prettier": "^3.5.3",
    "prisma": "^6.7.0",
    "standard": "^17.1.0",
    "standard-version": "^9.5.0",
    "start-server-and-test": "^2.0.4",
    "tough-cookie": "^6.0.0"
  }
}
